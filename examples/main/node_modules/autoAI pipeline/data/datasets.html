<script type="text/javascript">
    RED.nodes.registerType('datasets', {
        category: 'autoAI pipeline',
        color: '#7F8C8D',
        defaults: {
            name: {value:""},
            customized_datasets: {value:""},
            traditional_datasets: {value:""},
            source: {value:"", required:true}
        },
        inputs:1,
        outputs:1,
        icon: "font-awesome/fa-file-text",
        label: function() {
            return this.name || "datasets";
        },
        oneditprepare: function() {
            $("#node-input-name").val(this.name);
            $("#node-input-customized_datasets").val(this.customized_datasets);
            $("#node-input-traditional_datasets").val(this.traditional_datasets); 

            function toggleVisibility() {
                if (document.getElementById("node-input-source").value == "traditional") {
                    $(".toggle-customized").hide();
                    $(".toggle-traditional").show();
                    document.getElementById("traditional-datasets").innerHTML = "Datasets";
                } else {
                    document.getElementById("node-input-source").value = "customized";
                    $(".toggle-customized").show();
                    $(".toggle-traditional").hide();
                    document.getElementById("customized-datasets").innerHTML = "File Path";
                }
            }

            toggleVisibility();
            
            if (document.getElementById("node-input-source").value == "traditional") {
                $(".datasets-traditional").addClass("selected");
                document.getElementById("traditional-datasets").innerHTML =
                    "Datasets";
            } else {
                $(".datasets-customized").addClass("selected");
                document.getElementById("customized-datasets").innerHTML =
                    "File Path";
            }

            $(".datasets-traditional").on("click", function () {
                $(".datasets-customized").removeClass("selected");
                $(this).addClass("selected");
                document.getElementById("traditional-datasets").innerHTML =
                    "Datasets";
                document.getElementById("node-input-source").value = "traditional";
                toggleVisibility();
            });

            $(".datasets-customized").on("click", function () {
                $(".datasets-traditional").removeClass("selected");
                $(this).addClass("selected");
                document.getElementById("customized-datasets").innerHTML =
                    "File Path";
                document.getElementById("node-input-source").value = "customized";
                toggleVisibility(); 
            });
            
                        
        }
    });
</script>

<script type="text/x-red" data-template-name="datasets">
    <div class="form-row">
        <label for="node-input-name">Name</label>
        <input type="text" id="node-input-name" placeholder="Name" />
    </div>
    <br />
    <h3>Source of Datasets </h3>
    <div class="form-row">
        <span class="datasets-toggle">
        <button
            type="button"
            class="red-ui-button toggle datasets-traditional"
        >
            Datasets
        </button>
        <button
            type="button"
            class="red-ui-button toggle datasets-customized"
        >
            Customized Datasets
        </button>
        </span>
    </div>
    <div class="form-row toggle-customized">
        <label for="node-input-customized_datasets" id="customized-datasets"></label>
        <input type="text" id="node-input-customized_datasets" placeholder="Enter the path to your data file">
    </div>
    <div class="form-row toggle-traditional">  
        <label for="node-input-traditional_datasets" id="traditional-datasets"></label>
        <select id="node-input-traditional_datasets">
            <option value="mnist">mnist</option>
            <option value="cifar10">cifar-10</option>
        </select>
    </div>
    <div hidden>
        <input type="text" id="node-input-source" />
    </div>
</script>

<script type="text/x-red" data-help-name="datasets">
    <p>A node to choose datasets.</p>
</script>


