<script type="text/javascript">
    RED.nodes.registerType('datasets', {
        category: 'autoAI pipeline',
        color: '#7F8C8D',
        defaults: {
            name: {value:""},
            customized_datasets: {value:""},
            traditional_datasets: {value:""},
            source: {value:"", required:true}
        },
        inputs:1,
        outputs:1,
        icon: "font-awesome/fa-file-text",
        label: function() {
            if (this.source === "traditional") {
                return this.name||this.traditional_datasets||"datasets";
            } else {
                return this.name||"datasets";
            }
        },
        oneditprepare: function() {
            $("#node-input-name").val(this.name);
            $("#node-input-customized_datasets").val(this.customized_datasets);
            $("#node-input-traditional_datasets").val(this.traditional_datasets);
            
            function toggleVisibility() {
                var isTraditional = $("#node-input-source").val() === "traditional";
                $(".toggle-customized").toggle(!isTraditional);
                $(".toggle-traditional").toggle(isTraditional);
            }
            
            function toggleSelectedClass() {
                var isTraditional = $("#node-input-source").val() === "traditional";
                if(isTraditional) {
                    $(".datasets-traditional").addClass("selected");
                    $(".datasets-customized").removeClass("selected");
                } else {
                    $(".datasets-customized").addClass("selected");
                    $(".datasets-traditional").removeClass("selected");
                }
            }
            
            toggleVisibility();
            toggleSelectedClass();
            
            $(".datasets-toggle button").on("click", function () {
                var isTraditional = $(this).hasClass("datasets-traditional");
                $("#node-input-source").val(isTraditional ? "traditional" : "customized");
                toggleVisibility();
                toggleSelectedClass();
            });

            
                        
        }
    });
</script>

<script type="text/x-red" data-template-name="datasets">
    
    <div class="form-row">
        <label for="node-input-name">Name</label>
        <input type="text" id="node-input-name" placeholder="Name" />
    </div>
    <br />
    <h3>Source of Datasets </h3>
    <div class="form-row">
        <span class="datasets-toggle">
        <button
            type="button"
            class="red-ui-button toggle datasets-traditional"
        >
            Datasets
        </button>
        <button
            type="button"
            class="red-ui-button toggle datasets-customized"
        >
            Customized Datasets
        </button>
        </span>
    </div>
    <div class="form-row toggle-customized">
        <label for="node-input-customized_datasets" id="customized-datasets">Data Path</label>
        <input type="text" id="node-input-customized_datasets" placeholder="Enter the path to your data file">
    </div>
    <div class="form-row toggle-traditional">  
        <label for="node-input-traditional_datasets" id="traditional-datasets">Datasets</label>
        <select id="node-input-traditional_datasets">
            <option value="mnist">mnist</option>
            <option value="cifar10">cifar-10</option>
        </select>
    </div>
    <div hidden>
        <input type="text" id="node-input-source" />
    </div>
</script>

<script type="text/x-red" data-help-name="datasets">
    <p>A node to choose datasets.</p>
</script>


