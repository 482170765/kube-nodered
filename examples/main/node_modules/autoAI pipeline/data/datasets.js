const fs = require('fs');
const util = require('util');
const snippets = require('../snippets');

module.exports = function(RED) {
    function Datasetsopt(config) {
        RED.nodes.createNode(this,config);
        var node = this;
        var customized_datasets = config.customized_datasets;
        var traditional_datasets = config.traditional_datasets;
        var source = config.source;
        var script = '';
        node.on('input', function(msg) {
            script += snippets.IMPORTS;
            let chosenDataset = (source === "traditional") ? traditional_datasets : customized_datasets;
            script += util.format(snippets.DATASETS, chosenDataset);
            msg.payload = script; 
            node.send(msg);
           
        });
    }
    RED.nodes.registerType("datasets", Datasetsopt);
}


