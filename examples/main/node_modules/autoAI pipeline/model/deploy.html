<script type="text/x-red" data-template-name="deploy">
   <div class="form-row">
    <label for="node-input-name"><i class="fa fa-tag"></i> Name </label>
    <input type="text" id="node-input-name">
  </div>
  <div hidden>
    <label for="node-input-pyfile"><i class="fa fa-tag"></i> Py file </label>
    <input type="text" id="node-input-pyfile" placeholder="/home/user/x.py">
  </div>
  <div hidden>
    <label for="node-input-virtualenv"><i class="fa fa-tag"></i> Virtual Environment Path </label>
    <input type="text" id="node-input-virtualenv" placeholder="/home/user/venv">
  </div>
  <div class="form-row">
  <label>Use Python 3?</label>
    <input type="checkbox" id="node-input-python3" style="display: inline-block; width: auto; vertical-align: top;" checked>
  </div>
  <div hidden>
    <label>Continuous?</label>
    <input type="checkbox" id="node-input-continuous" style="display: inline-block; width: auto; vertical-align: top;">
  </div>
  <div hidden>
    <label>Stdin Input?</label>
    <input type="checkbox" id="node-input-stdInData" style="display: inline-block; width: auto; vertical-align: top;">
  </div>
</script>

<script type="text/x-red" data-help-name="deploy">
    <p>This node interacts with a python process. Script output will be forwarded to the node output</p>
</script>

<style type="text/css">
  .node_label_white {
    fill: white;
  }

  .node_label_white_italic {
    fill: white;
    font-style: italic;
  }
  #palette_node_pythonshell_in > div.palette_label {
    color: white;
  }
</style>


<script type="text/javascript">

  RED.nodes.registerType('deploy',{
    category: 'autoAI pipeline',
    defaults: {
      name: {required: false},
      pyfile: {required: false},
      virtualenv: {required: false},
      continuous: {required: false},
      stdInData: {required: false},
      python3: {value: true, required: false}
    },
    color:"#1c4e63",
    inputs: 1,
    outputs:1,
    icon: "font-awesome/fa-rocket",
    align: "left",
    label: function() {
        return this.name || "deploy";
    },
    labelStyle: function() {
      return this.name ? "node_label_white_italic" : "node_label_white";
    },    
    oneditprepare: function() {
      $("#node-input-python3").change(function(e) {
        if(e.target.checked) {
          $('#node-input-python3').prop('checked', true);
        }
      });
      
    },
    oneditsave: function(){
      if ($('#node-input-continuous').is(':checked') && !$('#node-input-stdInData').is(':checked')){
        this.inputs = 0;
      }
    },
   
  
  });
</script>